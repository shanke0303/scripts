(()=>{var e={430:e=>{"use strict";e.exports=require("./tg-cli")},747:e=>{"use strict";e.exports=require("fs")},622:e=>{"use strict";e.exports=require("path")},58:e=>{"use strict";e.exports=require("readline")}},o={};function s(r){var t=o[r];if(void 0!==t)return t.exports;var n=o[r]={exports:{}};return e[r](n,n.exports,s),n.exports}(()=>{s(747),s(622);const e=s(430);!async function(){const o=s(58),r=new e;console.log("Start tg-cli-cmd...");const t=o.createInterface({input:process.stdin,output:process.stdout});function n(e){return new Promise(((o,s)=>{t.question(e,(e=>{o(e.trim())}))}))}let a,c,l,g,i;try{c=await r.getCurrentUser()}catch(e){console.log("ğŸ™… å½“å‰ç”¨æˆ·è·å–å¤±è´¥:",e)}async function u(){if(a=await n("è¯·è¾“å…¥éœ€è¦ç™»å½•çš„æ‰‹æœºå·ç : "),l=a,a){console.log(`æ­£åœ¨ä¸º ${l} å‘é€éªŒè¯ç ...`);try{g=await r.sendCode(l),console.log("ğŸ˜„ éªŒè¯ç å·²å‘é€,è¯·æ³¨æ„æŸ¥æ”¶"),m()}catch(e){console.log("âŒ éªŒè¯ç å‘é€å¤±è´¥"),console.log(e),u()}}else console.log("ğŸ™… è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·"),u()}async function m(){if(a=await n("è¯·è¾“å…¥æ”¶åˆ°çš„éªŒè¯ç : "),i=a,a){console.log(`æ‰‹æœºå·:${l},éªŒè¯ç :${i},å¼€å§‹ç™»å½•...`);try{"auth.authorizationSignUpRequired"===(await r.signIn(l,g,i))._?(console.log(`âŒ ${l},è¿˜æœªæ³¨å†Œ.è¯·åˆ°Telegramæ³¨å†Œå“¦`),_()):(c=await r.getCurrentUser(),d())}catch(e){"SESSION_PASSWORD_NEEDED"===e.error_message?(console.log("âŒ ä½ å¯èƒ½æ‰“å¼€äº†äºŒæ­¥éªŒè¯,è¯·å…³é—­åé‡è¯•"),_()):"PHONE_CODE_EXPIRED"===e.error_message?(console.log("âŒ éªŒè¯ç å·²è¿‡æœŸ,è¯·é‡æ–°è·å–éªŒè¯ç "),u()):"PHONE_CODE_INVALID"===e.error_message?(console.log("âŒ éªŒè¯ç é”™è¯¯"),m()):"PHONE_NUMBER_UNOCCUPIED"===e.error_message?(console.log(`âŒ ${l},è¿˜æœªæ³¨å†Œ.è¯·åˆ°Telegramæ³¨å†Œå“¦`),_()):(console.log("âŒ ç™»å½•å¤±è´¥"),console.log(e),_())}}else console.log("ğŸ™… è¯·è¾“å…¥æ­£ç¡®çš„éªŒè¯ç "),m()}function d(){const e=`${c.user.last_name} ${c.user.first_name}`;console.log(`ğŸ‘ Hi ${e},è¯·è¾“å…¥æŒ‡ä»¤ä½¿ç”¨,éœ€è¦å¸®åŠ©è¯·è¾“å…¥help.`),async function o(){a=await n(`${e} > `);const s=function(e){const o=e.indexOf("?");return o>0?{cmd:e.substring(0,o),args:e.substr(o+1).split("&")}:{cmd:e,args:[]}}(a);if(!s)return void o();switch(s.cmd){case"me":try{c=await r.getCurrentUser(),console.log(c)}catch(e){console.log("âš  å½“å‰ç”¨æˆ·è·å–å¤±è´¥"),console.log(e)}break;case"logout":try{await r.logOut(),c=null,_()}catch(e){console.log(e)}break;case"peer":const e=s.args[0]&&"@"===s.args[0][0]?s.args[0].substr(1):s.args[0];if(e)try{console.log("found:",await r.getPeerByName(e))}catch(o){"USERNAME_INVALID"===o.error_message||"USERNAME_NOT_OCCUPIED"===o.error_message?console.log(`âš  æ²¡æœ‰æ‰¾åˆ°ç”¨æˆ· ${e}`):(console.log("âŒ æŸ¥æ‰¾ç”¨æˆ·å¤±è´¥"),console.log(o))}else console.log(p);break;case"msg":const o=s.args[0]&&"@"===s.args[0][0]?s.args[0].substr(1):s.args[0],t=s.args[1],n=s.args[2];if(o&&t)try{await r.msg({username:o,message:t,schedule_date:n}),console.log("ğŸ˜„ æ¶ˆæ¯å·²å‘é€")}catch(e){"USERNAME_INVALID"===e.error_message||"USERNAME_NOT_OCCUPIED"===e.error_message?console.log(`âš  æ²¡æœ‰æ‰¾åˆ°ç”¨æˆ· ${o}`):(console.log("âŒ æ¶ˆæ¯å‘é€å¤±è´¥"),console.log(e))}else console.log(p);break;case"help":console.log(p);break;case"exit":console.log("ğŸ‘‹ Bye Bye."),_();break;default:console.log(p)}o()}()}function _(){t.close(),console.log("Exit tg-cli-cmd."),process.exit()}c?d():(a=await n("ä½¿ç”¨åŠŸèƒ½éœ€è¦å…ˆç™»å½•,æ˜¯å¦è¿›è¡Œç™»å½•?{Y/n}: "),a&&"y"!==a.toLowerCase()?_():u());const p="ğŸ‘€ Look carefully please.\nInput template: <command>[?arg1&arg2...]\nCommands:\n  me                                                Get the current user info\n  peer?<username>                                   Resolve a @username to get peer info\n  msg?<username>&<message>[&[schedule_date]]        Send a message to user,[schedule_date] fomart:yyyy-MM-dd mm:HH:ss\n  logOut                                            Log out current user\n  help                                              Show the tg-cli-cmd useage tips\n  exit                                              Exit tg-cli-cmd\n"}()})()})();